<div class="bg-white shadow-md rounded px-8 pt-6 pb-8 mb-4 flex flex-col my-2">
  <div class="h-2 bg-driveGreen rounded-t-md"></div>
  <div class="px-8 py-6 ">
    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
  <div class="-mx-3 md:flex mb-6">
    <div class="md:w-1/2 px-3 mb-6 md:mb-0">
      <label class="block tracking-wide text-grey-darker text-xs font-bold mb-2" for="firstName">
        Prénom
      </label>
      <p-inputGroup>
        <p-inputGroupAddon>
          <i class="pi pi-user"></i>
        </p-inputGroupAddon>
        <input id="firstName" pInputText placeholder="Prénom" formControlName="firstName" [ngClass]="{'ng-invalid ng-dirty': firstName?.invalid && (!firstName?.untouched || submitted)}" />
      </p-inputGroup>
      @if(firstName?.invalid && (firstName?.dirty || !firstName?.untouched || submitted)){
        <div class="text-red-500 mt-2 text-xs italic">
          {{ getErrorMessage('firstName') }}
        </div>
      }
    </div>
    <div class="md:w-1/2 px-3">
      <label class="block tracking-wide text-grey-darker text-xs font-bold mb-2" for="lastName">
        Nom
      </label>
      <p-inputGroup>
        <p-inputGroupAddon>
          <i class="pi pi-user"></i>
        </p-inputGroupAddon>
        <input id="lastName" pInputText placeholder="Nom" formControlName="lastName" [ngClass]="{'ng-invalid ng-dirty': lastName?.invalid && (!lastName?.untouched || submitted)}" />
      </p-inputGroup>
      @if(lastName?.invalid && (lastName?.dirty || !lastName?.untouched || submitted)){
        <div class="text-red-500 mt-2 text-xs italic">
          {{ getErrorMessage('lastName') }}
        </div>
      }
    </div>
  </div>
    <div class="-mx-3 md:flex mb-6">
      <div class="md:w-full px-3">
        <label class="block tracking-wide text-grey-darker text-xs font-bold mb-2" for="email">
        Email
        </label>
        <p-inputGroup>
          <p-inputGroupAddon>
            <i class="pi pi-at"></i>
          </p-inputGroupAddon>
          <input id="email" pInputText placeholder="Email" formControlName="email" [autocomplete]="true" [ngClass]="{'ng-dirty ng-invalid': email?.invalid && (!email?.untouched || submitted)}" />
        </p-inputGroup>
        @if(email?.invalid && (email?.dirty || !email?.untouched || submitted)){
          <div class="text-red-500 mt-2 text-xs italic">
            {{ getErrorMessage('email') }}
          </div>
        }
      </div>
    </div>
    <div class="-mx-3 md:flex mb-6">
      <div class="md:w-full px-3">
        <label class="block tracking-wide text-grey-darker text-xs font-bold mb-2" for="password">
          Mot de passe
        </label>
        <p-password
          inputId="password"
          formControlName="password"
          [toggleMask]="true"
          promptLabel="Choose a password"
          weakLabel="Too simple"
          mediumLabel="Average complexity"
          strongLabel="Complex password"
          [inputStyle]="{'width': '100%'}"
          [style]="{'width': '100%'}"
          [ngClass]="{'ng-dirty ng-invalid': password?.invalid && (!password?.untouched || submitted)}"
        />
        @if(password?.invalid && (password?.dirty || !password?.untouched || submitted)){
          <div class="text-red-500 mt-2 text-xs italic">
            {{ getErrorMessage('password') }}
          </div>
        }
      </div>
    </div>
    <div class="-mx-3 md:flex mb-6">
      <div class="md:w-full px-3">
        <label class="block tracking-wide text-grey-darker text-xs font-bold mb-2" for="confirmPassword">
         Confirmer le mot de passe
        </label>
        <p-password
          inputId="confirmPassword"
          formControlName="confirmPassword"
          [inputStyle]="{'width': '100%'}"
          [style]="{'width': '100%'}"
          [ngClass]="{'ng-dirty ng-invalid': confirmPassword?.invalid && (!confirmPassword?.untouched || submitted) || registerForm.hasError('passwordMismatch')}"
        />
        @if(confirmPassword?.invalid && (confirmPassword?.dirty || !confirmPassword?.untouched || submitted) || registerForm.hasError('passwordMismatch')){
          <div class="text-red-500 mt-2 text-xs italic">
            {{ getErrorMessage('confirmPassword') }}
          </div>
        }
      </div>
    </div>
    <div class="flex align-items-center gap-1">
      <p-checkbox
        formControlName="termsConditions"
        [binary]="true"
        inputId="termsConditions" />
      <label for="termsConditions">I agree to terms and conditions.</label>
    </div>
    @if(termsConditions?.invalid && (termsConditions?.dirty || !termsConditions?.untouched || submitted)){
      <div class="text-red-500 mt-2 text-xs italic">
        {{ getErrorMessage('termsConditions') }}
      </div>
    }
    <div class="flex justify-center">
      <button class="mt-4 w-full bg-driveGreen text-white py-2 px-6 rounded-md hover:bg-emerald-500" type="submit">
        S'inscrire
      </button>
    </div>
    </form>
    </div>
</div>
